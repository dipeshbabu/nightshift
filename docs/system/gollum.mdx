---
title: Gollum File Viewer
description: Read-only file viewer for browsing agent workspace files
---

<Warning>
  Nightshift is currently in its infancy and is subject to change and incompleteness.
  If you find a bug, or have an idea to improve Nightshift, please raise an issue on [Github](https://github.com/nightshiftco/nightshift/tree/main).
</Warning>

Gollum is a read-only file viewer that provides a web UI for browsing workspace files. It starts automatically alongside the Ralph server in serve mode, giving you a live view of the agent's workspace without needing to open the directory yourself.

## How It Works

Gollum is a Ruby-based wiki engine that serves the workspace directory as browsable HTML pages. It reads files from a specific git ref (default `main`) and renders Markdown, code, and other file types in the browser. The workspace's `README.md` is used as the index page.

## Configuration

| Option | Default | Description |
|--------|---------|-------------|
| Port | `3001` (serve port + 1) | HTTP port for the file viewer |
| Git ref | `main` | The git ref to read files from |
| Config file | `gollum_config.rb` | Ruby config file in the workspace root |

## `gollum_config.rb`

Nightshift auto-generates a `gollum_config.rb` in the workspace directory on first launch:

```ruby
# Gollum configuration for Nightshift workspace
Precious::App.set(:wiki_options, {
  index_page: 'README',
  h1_title: true,
})
```

This sets the `README` as the index page and enables first-heading titles. If a `gollum_config.rb` already exists in the workspace, Nightshift will never overwrite it — your customizations are always preserved.

## Process Management

Gollum's process state is tracked via a PID file at `<prefix>/run/gollum.json`:

```json
{ "pid": 12345, "port": 3001 }
```

On startup, Nightshift checks for an existing PID file. If the recorded process is still alive, it reuses that server instead of starting a new one. If the process is dead (stale PID file), the file is cleaned up and a fresh server is started.

## Integration with Ralph

Gollum is started automatically as part of the Ralph serve workflow:

- **Serve mode** (`nightshift run --ralph --serve`) — Gollum starts on `--serve-port + 1`. If you serve Ralph on port 3000, the file viewer is available at `http://localhost:3001`.
- **TUI mode** — Gollum runs as part of the daemon process alongside the Ralph server.

No extra flags are needed — the file viewer is always available when Ralph is running.
